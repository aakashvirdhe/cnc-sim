<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CNC Web Sim</title>
  <meta charset="utf-8">
  <meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="google" content="nositelinkssearchbox" />
  <meta name="description"
    content="CNC Web Simulator, an open source CNC simulator for web browser. It can simulate lathe, mill." />
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="stylesheet" type="text/css" href="css/jquery-ui.structure.css">
  <link rel="stylesheet" type="text/css" href="css/fontIcon.css">
  <link rel="stylesheet" type="text/css" href="css/ui.css">
  <title>CNC Web Simulator</title>
  <script src="js/libs/lz-string.min.js"></script>
  <script src="js/libs/ace/ace.js"></script>
  <script src="js/libs/jquery-1.12.0.min.js"></script>
  <script src="js/libs/jquery-ui.min.js"></script>
  <script src="js/libs/three.js"></script>
  <script src="js/libs/dat.gui.js"></script>
  <script src="js/libs/stats.min.js"></script>
  <script src="js/libs/OrbitControls.js"></script>
  <script src="js/libs/TrackballControls.js"></script>
  <script src="js/libs/OBJExporter.js"></script>
  <script src="js/libs/STLBinaryExporter.js"></script>

  <script src="js/cws.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/project.js"></script>
  <script src="js/editor.js"></script>
  <script src="js/renderer.js"></script>
  <script src="js/shaders.js"></script>
  <script src="js/machine.js"></script>
  <script src="js/lathe.js"></script>
  <script src="js/mill.js"></script>
  <script src="js/motion.js"></script>
  <script src="js/controller.js"></script>
  <script src="js/ui.js"></script>

  <script type="text/javascript">
    var controller, ui;
    // TODO
    // Lathe tool
    // Check input forms
    window.addEventListener("load", (function () {
      controller = new CWS.Controller(
        new CWS.CodeEditor(),
        new CWS.Storage({ useCompression: true, useLocalStorage: true }),
        new CWS.Renderer("renderer1"),
        new CWS.Motion(),
        true
      );

      ui = new CWS.UI(controller);
      var stats = ui.createStats(true);

      function onWindowResize() {
        controller.windowResize();
        ui.resize();
      }

      function animate() {
        requestAnimationFrame(animate);
        stats.update();
        controller.motion.run();
        controller.render();
      }
      animate();

      window.addEventListener('resize', onWindowResize, false);
      controller.runInterpreter();
    }), true);
  </script>
</head>

<body>
  <div id="editor"></div>
  <script type="module" src="/src/main.tsx"></script>
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-73803745-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>

</html>